"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6667],{6667:(s,t,e)=>{function a(s){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(s){return typeof s}:function(s){return s&&"function"==typeof Symbol&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},a(s)}function i(s,t,e){return(t=function(s){var t=function(s,t){if("object"!=a(s)||!s)return s;var e=s[Symbol.toPrimitive];if(void 0!==e){var i=e.call(s,t||"default");if("object"!=a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(s)}(s,"string");return"symbol"==a(t)?t:t+""}(t))in s?Object.defineProperty(s,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[t]=e,s}e.r(t),e.d(t,{default:()=>l});var r=e(2505),o=e.n(r),n=e(3684);const c={data:function(){return{isLoading:!1,statuses:[],mail_statuses:[],mobile_statuses:[],settings:{username:n.A.user.username,current_password:"",password:"",confirm_password:""}}},created:function(){this.getOrderStatus(),this.getMailSetting()},methods:{getOrderStatus:function(){var s=this,t=this;o().get(this.$apiUrl+"/order_statuses").then((function(t){s.isLoading=!1,s.statuses=t.data.data,console.log("this.statuses =>",s.statuses)})).catch((function(e){t.isLoading=!1,e.request.statusText?s.showError(e.request.statusText):e.message?s.showError(e.message):s.showError(__("something_went_wrong"))}))},getMailSetting:function(){var s=this,t=this;o().get(this.$apiUrl+"/mail_settings").then((function(t){s.isLoading=!1,t.data.data.forEach((function(t){1===t.mail_status&&s.mail_statuses.push(t.order_status_id),1===t.mobile_status&&s.mobile_statuses.push(t.order_status_id)}))})).catch((function(e){t.isLoading=!1,e.request.statusText?s.showError(e.request.statusText):e.message?s.showError(e.message):s.showError(__("something_went_wrong"))}))},saveMailSetting:function(){var s=this,t=this;this.isLoading=!0;var e=new FormData;this.statuses.forEach((function(t){e.append("status_ids[]",t.id),s.mail_statuses.includes(t.id)?e.append("mail_statuses[]","1"):e.append("mail_statuses[]","0"),s.mobile_statuses.includes(t.id)?e.append("mobile_statuses[]","1"):e.append("mobile_statuses[]","0")})),o().post(this.$apiUrl+"/mail_settings/save",e).then((function(e){var a=e.data;t.isLoading=!1,1===a.status?(t.showSuccess(a.message),s.getMailSetting()):t.showError(a.message)})).catch((function(e){t.isLoading=!1,e.request.statusText?s.showError(e.request.statusText):e.message?s.showError(e.message):s.showError(__("something_went_wrong"))}))},saveRecord:function(){var s=this,t=this;this.isLoading=!0,o().post(this.$apiUrl+"/system_users/change_password",this.settings).then((function(e){var a=e.data;if(t.isLoading=!1,1===a.status){t.showMessage("success",a.message);var i=n.A.user.role_id;3===i?s.$router.push("/seller"):4===i?s.$router.push("/delivery_boy"):s.$router.push({path:"/"})}else t.showError(a.message)})).catch((function(e){t.isLoading=!1,e.request.statusText?s.showError(e.request.statusText):e.message?s.showError(e.message):s.showError(__("something_went_wrong"))}))}}};const l=(0,e(4486).A)(c,(function(){var s=this,t=s._self._c;return t("div",[t("div",{staticClass:"page-heading"},[t("h3",[s._v(s._s(s.__("settings")))])]),s._v(" "),t("div",{staticClass:"page-content"},[t("section",{staticClass:"row"},[t("div",{staticClass:"col-12 col-lg-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-lg-6 col-md-6"},[t("form",{on:{submit:function(t){return t.preventDefault(),s.saveMailSetting.apply(null,arguments)}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body px-3 py-4-5"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("h3",[s._v(s._s(s.__("order_mail_settings")))]),s._v(" "),t("div",{staticClass:"mt-5"},[t("div",{staticClass:"col-8 col-md-8 mb-2 offset-md-1"},[t("div",{staticClass:"row d-flex justify-content-between"},[t("div",{staticClass:"col-6"},[t("h6",[s._v(s._s(s.__("order_status")))])]),s._v(" "),t("div",{staticClass:"col-3"},[t("h6",[s._v(s._s(s.__("mail")))])]),s._v(" "),t("div",{staticClass:"col-3"},[t("h6",[s._v(s._s(s.__("mobile")))])])]),s._v(" "),s._l(s.statuses,(function(e,a){return t("div",{staticClass:"row d-flex justify-content-between"},[t("div",{staticClass:"col-6"},[t("label",{attrs:{for:"checkbox_"+e.id}},[s._v(" "+s._s(s.formattedName(e.status))+" ")])]),s._v(" "),t("div",{staticClass:"form-check form-switch col-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.mail_statuses,expression:"mail_statuses"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"checkbox_"+e.id},domProps:i({value:e.id,checked:s.mail_statuses.includes(e.id)},"checked",Array.isArray(s.mail_statuses)?s._i(s.mail_statuses,e.id)>-1:s.mail_statuses),on:{change:function(t){var a=s.mail_statuses,i=t.target,r=!!i.checked;if(Array.isArray(a)){var o=e.id,n=s._i(a,o);i.checked?n<0&&(s.mail_statuses=a.concat([o])):n>-1&&(s.mail_statuses=a.slice(0,n).concat(a.slice(n+1)))}else s.mail_statuses=r}}})]),s._v(" "),t("div",{staticClass:"form-check form-switch col-3"},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.mobile_statuses,expression:"mobile_statuses"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"checkbox_"+e.id},domProps:i({value:e.id,checked:s.mobile_statuses.includes(e.id)},"checked",Array.isArray(s.mobile_statuses)?s._i(s.mobile_statuses,e.id)>-1:s.mobile_statuses),on:{change:function(t){var a=s.mobile_statuses,i=t.target,r=!!i.checked;if(Array.isArray(a)){var o=e.id,n=s._i(a,o);i.checked?n<0&&(s.mobile_statuses=a.concat([o])):n>-1&&(s.mobile_statuses=a.slice(0,n).concat(a.slice(n+1)))}else s.mobile_statuses=r}}})])])}))],2)])])])]),s._v(" "),t("div",{staticClass:"card-footer"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s.isLoading}},[s._v("\n                                            "+s._s(s.__("save"))+" "),s.isLoading?t("b-spinner",{attrs:{small:"",label:"Spinning"}}):s._e()],1),s._v(" "),t("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return s.$router.go(-1)}}},[s._v(s._s(s.__("back")))])])])])]),s._v(" "),t("div",{staticClass:"col-lg-6 col-md-6"},[t("form",{on:{submit:function(t){return t.preventDefault(),s.saveRecord.apply(null,arguments)}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-body px-3 py-4-5"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("h3",[s._v(s._s(s.__("change_username_and_password")))]),s._v(" "),t("div",{staticClass:"mt-5"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"username"}},[s._v(s._s(s.__("username")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.settings.username,expression:"settings.username"}],staticClass:"form-control",attrs:{type:"text",id:"username",placeholder:s.__("username"),required:""},domProps:{value:s.settings.username},on:{input:function(t){t.target.composing||s.$set(s.settings,"username",t.target.value)}}})]),s._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"current_password"}},[s._v(s._s(s.__("current_password")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.settings.current_password,expression:"settings.current_password"}],staticClass:"form-control",attrs:{type:"password",id:"current_password",placeholder:s.__("current_password"),required:""},domProps:{value:s.settings.current_password},on:{input:function(t){t.target.composing||s.$set(s.settings,"current_password",t.target.value)}}})]),s._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"password"}},[s._v(s._s(s.__("password")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.settings.password,expression:"settings.password"}],staticClass:"form-control",attrs:{type:"password",id:"password",placeholder:s.__("password"),required:""},domProps:{value:s.settings.password},on:{input:function(t){t.target.composing||s.$set(s.settings,"password",t.target.value)}}})]),s._v(" "),t("div",{staticClass:"form-group"},[t("label",{attrs:{for:"confirm_password"}},[s._v(s._s(s.__("confirm_password")))]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.settings.confirm_password,expression:"settings.confirm_password"}],staticClass:"form-control",attrs:{type:"password",id:"confirm_password",placeholder:s.__("confirm_password"),required:""},domProps:{value:s.settings.confirm_password},on:{input:function(t){t.target.composing||s.$set(s.settings,"confirm_password",t.target.value)}}})])])])])]),s._v(" "),t("div",{staticClass:"card-footer"},[t("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:s.isLoading}},[s._v("\n                                        "+s._s(s.__("save"))+" "),s.isLoading?t("b-spinner",{attrs:{small:"",label:"Spinning"}}):s._e()],1),s._v(" "),t("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:function(t){return s.$router.go(-1)}}},[s._v(s._s(s.__("back")))])])])])])])])])])])}),[],!1,null,null,null).exports}}]);
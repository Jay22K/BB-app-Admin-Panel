"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7044],{7044:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var r=a(2505),s=a.n(r);const o={data:function(){return{isLoading:!1,categories:[],products:[],popup_enabled:0,popup_always_show_home:0,popup_type:"default",popup_type_id:"",image:"",image_url:"",popup_url:"",error:null}},created:function(){this.getCategories(),this.getProducts(),this.getPopupData()},methods:{getPopupData:function(){var e=this;s().get(this.$apiUrl+"/popup").then((function(t){var a,r,s;t.data.data&&(e.record=t.data.data,e.popup_enabled=null!==(a=e.record.popup_enabled)&&void 0!==a?a:0,e.popup_always_show_home=null!==(r=e.record.popup_always_show_home)&&void 0!==r?r:0,e.popup_type=e.record.popup_type,e.popup_type_id=e.record.popup_type_id,e.popup_url=e.record.popup_url,e.image_url=null!==(s=e.record.popup_image)&&void 0!==s?s:"",console.log("this.record =>",e.record),e.record.map((function(t,a){"0"===t.value||"1"===t.value?e.firebase[t.variable]="0"===t.value?0:1:e.firebase[t.variable]=t.value})))})).catch((function(t){t.request.statusText?e.showError(t.request.statusText):t.message?e.showError(t.message):e.showError(__("something_went_wrong"))}))},dropFile:function(e){e.preventDefault(),this.$refs.file_image.files=e.dataTransfer.files,this.handleFileUpload(),e.currentTarget.classList.add("bg-gray-100"),e.currentTarget.classList.remove("bg-green-300")},handleFileUpload:function(){var e=this.$refs.file_image.files[0];if(this.error=null,e){if(["image/jpeg","image/png","image/jpg","image/gif","image/webp"].includes(e.type)){e.size>2097152?this.error="File size exceeds the maximum allowed limit (2MB).":(this.imageUrl=URL.createObjectURL(e),this.image=this.$refs.file_image.files[0],this.image_url=URL.createObjectURL(this.image))}else this.error="Invalid file type. Please upload a JPEG, PNG, JPG,  GIF or WEBP image."}},getCategories:function(){var e=this;this.isLoading=!0,s().get(this.$apiUrl+"/categories/active").then((function(t){e.isLoading=!1,e.categories=t.data.data})).catch((function(t){t.request.statusText?e.showError(t.request.statusText):t.message?e.showError(t.message):e.showError(__("something_went_wrong")),e.isLoading=!1}))},getProducts:function(){var e=this;this.isLoading=!0,s().get(this.$apiUrl+"/products/active").then((function(t){e.isLoading=!1,e.products=t.data.data})).catch((function(t){t.request.statusText?e.showError(t.request.statusText):t.message?e.showError(t.message):e.showError(__("something_went_wrong")),e.isLoading=!1}))},saveRecord:function(){var e=this;this.isLoading=!0;var t=new FormData;t.append("popup_enabled",this.popup_enabled),t.append("popup_always_show_home",this.popup_always_show_home),t.append("popup_type",this.popup_type),t.append("popup_type_id",this.popup_type_id),t.append("popup_image",this.image),t.append("popup_url",this.popup_url);var a=this.$apiUrl+"/popup/save",r=this;s().post(a,t).then((function(t){var a=t.data;1===a.status?(e.showMessage("success",a.message),setTimeout((function(){r.$swal.close(),r.$router.push({path:"/popup"}),r.getPopupData(),r.isLoading=!1}),1e3)):(r.showError(a.message),r.isLoading=!1)})).catch((function(t){t.request.statusText?e.showError(t.request.statusText):t.message?e.showError(t.message):e.showError(__("something_went_wrong")),r.isLoading=!1}))}}};const i=(0,a(4486).A)(o,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"page-heading"},[t("div",{staticClass:"page-title"},[t("div",{staticClass:"row"},[e._m(0),e._v(" "),t("div",{staticClass:"col-12 col-md-6 order-md-2 order-first"},[t("nav",{staticClass:"breadcrumb-header float-start float-lg-end",attrs:{"aria-label":"breadcrumb"}},[t("ol",{staticClass:"breadcrumb"},[t("li",{staticClass:"breadcrumb-item"},[t("router-link",{attrs:{to:"/dashboard"}},[e._v(e._s(e.__("dashboard")))])],1),e._v(" "),t("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[e._v("Popup Offer")])])])])])])]),e._v(" "),t("section",{staticClass:"section"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-md-12 order-md-1 order-last"},[t("form",{attrs:{method:"post",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.saveRecord.apply(null,arguments)}}},[t("div",{staticClass:"card"},[t("div",{staticClass:"card-header"},[t("h4",{staticClass:"card-title"},[e._v("Popup Offer & Keys")]),e._v(" "),t("span",{staticClass:"pull-right"},[t("button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn btn-primary btn_refresh",attrs:{type:"button",title:e.__("refresh")},on:{click:function(t){return e.getPopupData()}}},[t("i",{staticClass:"fa fa-refresh",attrs:{"aria-hidden":"true"}})])])]),e._v(" "),t("div",{staticClass:"card-body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"form-group col-md-4"},[t("div",{staticClass:"form-group"},[t("label",{staticClass:"control-label"},[e._v("Popup Offer Enabled (ON /OFF) ")]),t("br"),e._v(" "),t("b-form-radio-group",{attrs:{options:[{text:" ON",value:1},{text:" OFF",value:0}],buttons:"","button-variant":"outline-primary",required:""},model:{value:e.popup_enabled,callback:function(t){e.popup_enabled=t},expression:"popup_enabled"}})],1)]),e._v(" "),t("div",{staticClass:"form-group col-md-4"},[t("label",[e._v("Type")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.popup_type,expression:"popup_type"}],staticClass:"form-control form-select",attrs:{required:""},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.popup_type=t.target.multiple?a:a[0]},function(t){e.popup_type_id=""}]}},[t("option",{attrs:{value:"default"}},[e._v("Default")]),e._v(" "),t("option",{attrs:{value:"category"}},[e._v("Category")]),e._v(" "),t("option",{attrs:{value:"product"}},[e._v("Product")]),e._v(" "),t("option",{attrs:{value:"popup_url"}},[e._v("Popup Url")])])]),e._v(" "),t("div",{staticClass:"col-md-12"},["category"==e.popup_type?t("div",{staticClass:"form-group"},[t("label",[e._v("Category")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.popup_type_id,expression:"popup_type_id"}],staticClass:"form-control form-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.popup_type_id=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Select Category")]),e._v(" "),e._l(e.categories,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.name))])}))],2)]):e._e(),e._v(" "),"product"==e.popup_type?t("div",{staticClass:"form-group"},[t("label",[e._v("Products")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.popup_type_id,expression:"popup_type_id"}],staticClass:"form-control form-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.popup_type_id=t.target.multiple?a:a[0]}}},[t("option",{attrs:{value:""}},[e._v("Select Procduct")]),e._v(" "),e._l(e.products,(function(a){return t("option",{domProps:{value:a.id}},[e._v(e._s(a.name))])}))],2)]):e._e(),e._v(" "),"popup_url"==e.popup_type?t("div",{staticClass:"form-group"},[t("label",[e._v("Link")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.popup_url,expression:"popup_url"}],staticClass:"form-control",attrs:{type:"url",placeholder:"Enter Link"},domProps:{value:e.popup_url},on:{input:function(t){t.target.composing||(e.popup_url=t.target.value)}}})]):e._e()]),e._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"form-group"},[t("label",[e._v("Image")]),e._v(" "),t("p",{staticClass:"text-muted"},[e._v("Please choose square image of larger than 500px*500px.")]),e._v(" "),e.error?t("span",{staticClass:"error"},[e._v(e._s(e.error))]):e._e(),e._v(" "),t("input",{ref:"file_image",staticClass:"file-input",attrs:{type:"file",name:"slider_image",accept:"image/*"},on:{change:e.handleFileUpload}}),e._v(" "),t("div",{staticClass:"file-input-div bg-gray-100",on:{click:function(t){return e.$refs.file_image.click()},drop:e.dropFile,dragover:e.$dragoverFile,dragleave:e.$dragleaveFile}},[e.image&&""!==e.image.name?[t("label",[e._v("Selected file name:- "+e._s(e.image.name))])]:[e._m(1),e._v(" "),t("label",[e._v(e._s(e.__("drop_files_here_or_click_to_upload")))])]],2),e._v(" "),e.image_url?t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-4"},[t("img",{staticClass:"img-thumbnail custom-image",attrs:{src:e.image_url,title:"Popup Offer Image",alt:"Popup Offer Image"}})])]):e._e()])])])]),e._v(" "),t("div",{staticClass:"card-footer"},[t("b-button",{attrs:{type:"submit",variant:"primary",disabled:e.isLoading}},[e._v("Save\n                            "),e.isLoading?t("b-spinner",{attrs:{small:"",label:"Spinning"}}):e._e()],1)],1)])])])])])])}),[function(){var e=this._self._c;return e("div",{staticClass:"col-12 col-md-6 order-md-1 order-last"},[e("h3",[this._v("Popup Offer")])])},function(){var e=this._self._c;return e("label",[e("i",{staticClass:"fa fa-cloud-upload fa-2x"})])}],!1,null,null,null).exports}}]);
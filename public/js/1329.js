"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1329],{1329:(t,s,e)=>{e.r(s),e.d(s,{default:()=>n});var a=e(2505),r=e.n(a);const i={data:function(){return{isLoading:!1,updaterResult:{version:"0.0.0"}}},computed:{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}},created:function(){this.checkSystemUpdate(),this.getTimeSlots(),this.getTimeSlotsSettings()},methods:{checkSystemUpdate:function(){var t=this;r().get(this.$baseUrl+"/updater.check").then((function(s){var e=JSON.stringify(s.data);t.updaterResult=JSON.parse(e),console.log("this.updaterResult updater.check => ",t.updaterResult.version)}))},systemUpdate:function(){var t=this;this.$swal.fire({title:"Are you Sure?",text:"You want be able to revert this",confirmButtonText:"Yes, Sure",cancelButtonText:"Cancel",icon:"warning",showCancelButton:!0,confirmButtonColor:"#37a279",cancelButtonColor:"#d33"}).then((function(s){s.value&&(t.isLoading=!0,r().get(t.$baseUrl+"/updater.update").then((function(s){""!=s?(t.showMessage("success","Congratulation System Updated Successfully"),t.checkSystemUpdate(),t.isLoading=!1,setTimeout((function(){window.location.href=t.$baseUrl+"/migration"}),5e3)):(t.showMessage("error","Something went wrong! System did not update."),t.showError("Something went wrong! System did not update."),t.isLoading=!1),console.log("Updater response log =>",s)})))}))}}};const n=(0,e(4486).A)(i,(function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"page-heading"},[s("div",{staticClass:"row"},[t._m(0),t._v(" "),s("div",{staticClass:"col-12 col-md-6 order-md-2 order-first"},[s("nav",{staticClass:"breadcrumb-header float-start float-lg-end",attrs:{"aria-label":"breadcrumb"}},[s("ol",{staticClass:"breadcrumb"},[s("li",{staticClass:"breadcrumb-item"},[s("router-link",{attrs:{to:"/dashboard"}},[t._v(t._s(t.__("dashboard")))])],1),t._v(" "),s("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("System Updater")])])])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 col-md-6 order-md-1 order-last"},[t.updaterResult&&t.updaterResult.description?s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h4",[t._v("Change Logs of eGrocer "+t._s("v - "+t.updaterResult.version)+" ")]),t._v(" "),s("span",{staticClass:"pull-right"},[s("span",{staticClass:"badge bg-primary"},[t._v("\n                  New Update Available "),s("span",{staticClass:"badge rounded-pill bg-success text-white ms-1"},[t._v(t._s("v - "+t.updaterResult.version))])])])]),t._v(" "),s("div",{staticClass:"card-body"},[s("span",{attrs:{id:"update_description"},domProps:{innerHTML:t._s(t.updaterResult.description)}})]),t._v(" "),s("div",{staticClass:"card-footer"},[s("b-button",{attrs:{type:"button",variant:"primary",disabled:t.isLoading},on:{click:t.systemUpdate}},[t.isLoading?s("span",[s("b-spinner",{attrs:{small:"",label:"Spinning"}}),t._v(" System is updating... ")],1):s("span",[t._v("Update The System ")])])],1)]):s("div",{staticClass:"card"},[s("div",{staticClass:"card-header"},[s("h4",[t._v("New system update is not available. ")]),t._v(" "),s("span",{staticClass:"pull-right"},[s("span",{staticClass:"badge bg-primary"},[t._v("\n                          eGrocer current version is\n                          "),s("span",{staticClass:"badge rounded-pill bg-success text-white ms-1"},[t._v(t._s("v - "+t.$currentVersion))])])])])])])])])])}),[function(){var t=this._self._c;return t("div",{staticClass:"col-12 col-md-6 order-md-1 order-last"},[t("h3",[this._v("System Updater")])])}],!1,null,null,null).exports}}]);